[pytest]
# Discover tests in the tests/ folder
testpaths = tests
python_files = test_*.py

# Enable coverage via pytest-cov by default
addopts = -q --cov=src --cov-report=term-missing --cov-report=html -W ignore::ResourceWarning -W "ignore:unclosed database.*:ResourceWarning:coverage\.parser" -W "ignore:unclosed database in <sqlite3\.Connection object at .*:ResourceWarning:coverage\.parser" -p no:warnings

# Make the src/ directory importable as a top-level package (utils, etc.)
pythonpath = src

# Quiet noisy warnings that are not relevant to unit logic on CI/macOS
filterwarnings =
    ignore:unclosed database.*:ResourceWarning:coverage
    ignore:unclosed database:ResourceWarning
    ignore::ResourceWarning
    ignore:unclosed database.*sqlite3.Connection:ResourceWarning
    ignore::ResourceWarning:^coverage\.
    ignore:unclosed database.*:ResourceWarning:coverage\.parser
    ignore:.*unclosed database.*:ResourceWarning:coverage\.parser$
    ignore:unclosed database in <sqlite3\.Connection object at .*:ResourceWarning:coverage\.parser
